<!doctype html><html lang=zh-cn>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=robots content="noodp">
<title>天池大数据竞赛 Spaceack带你利用Pandas，趋势图与桑基图分析美国选民候选人喜好度 - Spaceack's Blog</title><meta name=Description content="Spaceck的个人Blog 编程之舞"><meta property="og:title" content="天池大数据竞赛 Spaceack带你利用Pandas，趋势图与桑基图分析美国选民候选人喜好度">
<meta property="og:description" content="长文预警 首先，这是一篇面向新人的教程导向的分析文章，（by the way其实我也是新手，从比赛开始才学的Pandas库，这也是我的一篇学习笔记），">
<meta property="og:type" content="article">
<meta property="og:url" content="https://spaceack.github.io/20210101-%E5%A4%A9%E6%B1%A0%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%AB%9E%E8%B5%9B-%E8%B6%8B%E5%8A%BF%E5%9B%BE%E4%B8%8E%E6%A1%91%E5%9F%BA%E5%9B%BE%E5%88%86%E6%9E%90%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E5%80%99%E9%80%89%E4%BA%BA%E5%96%9C%E5%A5%BD%E5%BA%A6/"><meta property="og:image" content="https://spaceack.github.io/logo.png"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-01-01T23:50:31+00:00">
<meta property="article:modified_time" content="2021-01-01T23:50:31+00:00"><meta property="og:site_name" content="My cool site">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://spaceack.github.io/logo.png">
<meta name=twitter:title content="天池大数据竞赛 Spaceack带你利用Pandas，趋势图与桑基图分析美国选民候选人喜好度">
<meta name=twitter:description content="长文预警 首先，这是一篇面向新人的教程导向的分析文章，（by the way其实我也是新手，从比赛开始才学的Pandas库，这也是我的一篇学习笔记），">
<meta name=application-name content="Spaceack's Blog">
<meta name=apple-mobile-web-app-title content="Spaceack's Blog"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel=icon href=favicon-32x32.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://spaceack.github.io/20210101-%E5%A4%A9%E6%B1%A0%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%AB%9E%E8%B5%9B-%E8%B6%8B%E5%8A%BF%E5%9B%BE%E4%B8%8E%E6%A1%91%E5%9F%BA%E5%9B%BE%E5%88%86%E6%9E%90%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E5%80%99%E9%80%89%E4%BA%BA%E5%96%9C%E5%A5%BD%E5%BA%A6/><link rel=prev href=https://spaceack.github.io/20201001-python%E5%88%A9%E7%94%A8matplotlib%E4%B8%87%E8%8A%B1%E5%B0%BA%E7%94%BB%E6%9C%88%E9%A5%BC/><link rel=next href=https://spaceack.github.io/20210929-%E4%BD%BF%E7%94%A8mysql%E5%AE%9E%E7%8E%B0%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload="this.onload=null,this.rel='stylesheet'">
<noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload="this.onload=null,this.rel='stylesheet'">
<noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"天池大数据竞赛 Spaceack带你利用Pandas，趋势图与桑基图分析美国选民候选人喜好度","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/spaceack.github.io\/20210101-%E5%A4%A9%E6%B1%A0%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%AB%9E%E8%B5%9B-%E8%B6%8B%E5%8A%BF%E5%9B%BE%E4%B8%8E%E6%A1%91%E5%9F%BA%E5%9B%BE%E5%88%86%E6%9E%90%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E5%80%99%E9%80%89%E4%BA%BA%E5%96%9C%E5%A5%BD%E5%BA%A6\/"},"image":["https:\/\/spaceack.github.io\/images\/Apple-Devices-Preview.png"],"genre":"posts","keywords":"python, 数据分析, pandas, 桑基图","wordcount":4655,"url":"https:\/\/spaceack.github.io\/20210101-%E5%A4%A9%E6%B1%A0%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%AB%9E%E8%B5%9B-%E8%B6%8B%E5%8A%BF%E5%9B%BE%E4%B8%8E%E6%A1%91%E5%9F%BA%E5%9B%BE%E5%88%86%E6%9E%90%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E5%80%99%E9%80%89%E4%BA%BA%E5%96%9C%E5%A5%BD%E5%BA%A6\/","datePublished":"2021-01-01T23:50:31+00:00","dateModified":"2021-01-01T23:50:31+00:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"Spaceack","logo":"https:\/\/spaceack.github.io\/images\/avatar.jpeg"},"author":{"@type":"Person","name":"Spaceack"},"description":""}</script></head>
<body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':'auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark')&&document.body.setAttribute('theme','dark')</script>
<div id=mask></div><div class=wrapper><header class=desktop id=header-desktop>
<div class=header-wrapper>
<div class=header-title>
<a href=/ title="Spaceack's Blog"><span class=header-title-pre><i class="far fa-kiss-wink-heart fa-fw"></i></span>Spaceack's Blog</a>
</div>
<div class=menu>
<div class=menu-inner><a class=menu-item href=/posts/> 所有文章 </a><a class=menu-item href=/tags/> 标签 </a><a class=menu-item href=/categories/> 分类 </a><a class=menu-item href=/links/> 友链 </a><a class=menu-item href=/about/> 关于 </a><a class=menu-item href=/challenge/> 战利品 </a><a class=menu-item href=/book/> 读书 </a><a class=menu-item href=https://github.com/spaceack title=GitHub rel="noopener noreffer" target=_blank><i class="fab fa-github fa-fw"></i> </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索>
<i class="fas fa-search fa-fw" aria-hidden=true></i>
</a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空>
<i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a>
<span class="search-button search-loading" id=search-loading-desktop>
<i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i>
</span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a>
</div>
</div>
</div>
</header><header class=mobile id=header-mobile>
<div class=header-container>
<div class=header-wrapper>
<div class=header-title>
<a href=/ title="Spaceack's Blog"><span class=header-title-pre><i class="far fa-kiss-wink-heart fa-fw"></i></span>Spaceack's Blog</a>
</div>
<div class=menu-toggle id=menu-toggle-mobile>
<span></span><span></span><span></span>
</div>
</div>
<div class=menu id=menu-mobile><div class=search-wrapper>
<div class="search mobile" id=search-mobile>
<input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索>
<i class="fas fa-search fa-fw" aria-hidden=true></i>
</a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空>
<i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a>
<span class="search-button search-loading" id=search-loading-mobile>
<i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i>
</span>
</div>
<a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>
取消
</a>
</div><a class=menu-item href=/posts/ title>所有文章</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/categories/ title>分类</a><a class=menu-item href=/links/ title>友链</a><a class=menu-item href=/about/ title>关于</a><a class=menu-item href=/challenge/ title>战利品</a><a class=menu-item href=/book/ title>读书</a><a class=menu-item href=https://github.com/spaceack title=GitHub rel="noopener noreffer" target=_blank><i class="fab fa-github fa-fw"></i></a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a></div>
</div>
</header><div class="search-dropdown desktop">
<div id=search-dropdown-desktop></div>
</div>
<div class="search-dropdown mobile">
<div id=search-dropdown-mobile></div>
</div><main class=main>
<div class=container><div class=toc id=toc-auto>
<h2 class=toc-title>目录</h2>
<div class=toc-content id=toc-content-auto></div>
</div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">天池大数据竞赛 Spaceack带你利用Pandas，趋势图与桑基图分析美国选民候选人喜好度</h1><div class=post-meta>
<div class=post-meta-line><span class=post-author><a href=/about title=Author rel=" author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Spaceack</a></span>&nbsp;<span class=post-category>收录于 <a href=/categories/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/><i class="far fa-folder fa-fw" aria-hidden=true></i>数据分析</a>&nbsp;<a href=/categories/%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96/><i class="far fa-folder fa-fw" aria-hidden=true></i>数据可视化</a></span></div>
<div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2021-01-01>2021-01-01</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;约 4655 字&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;预计阅读 10 分钟&nbsp;</div>
</div><div class="details toc" id=toc-static data-kept>
<div class="details-summary toc-title">
<span>目录</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span>
</div>
<div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents>
<ul>
<li><a href=#数据预处理>数据预处理</a></li>
<li><a href=#数据整合>数据整合</a>
<ul>
<li><a href=#数据探索>数据探索</a></li>
<li><a href=#格式转换>格式转换</a></li>
</ul>
</li>
<li><a href=#绘制收到捐赠额最多的两位候选人的总捐赠额变化趋势图>绘制收到捐赠额最多的两位候选人的总捐赠额变化趋势图</a>
<ul>
<li><a href=#结论>结论</a></li>
</ul>
</li>
<li><a href=#使用桑基图分析美国各州对党派的贡献度>使用桑基图分析美国各州对党派的贡献度</a>
<ul>
<li><a href=#结论-1>结论</a></li>
</ul>
</li>
</ul>
</nav></div>
</div><div class=content id=content><p><strong>长文预警</strong></p>
<p>首先，这是一篇面向新人的教程导向的分析文章，（by the way其实我也是新手，从比赛开始才学的Pandas库，这也是我的一篇学习笔记），所以会包含很多函数的基础用法，解题思路等等, 流程会比较详细。</p>
<p>其次，本文在官方教程基础上会加入创新内容，但是绝不会为了用而用某种新方法，一定本着分析数据有所帮助的原则和对数据敬畏的态度来做。</p>
<p>再者，为了更方便学习，请点击右上角蓝色的 Star 和 Fork 按钮。</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>[数据集下载: ](!https://tianchi.aliyun.com/competition/entrance/531837/introduction?spm=5176.12281973.1005.3.11ae1f540dSho6)
https://tianchi.aliyun.com/competition/entrance/531837/introduction?spm=5176.12281973.1005.3.11ae1f540dSho6

</code></pre></td></tr></table>
</div>
</div><div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># 导入相关处理包</span>
<span class=kn>import</span> <span class=nn>pandas</span> <span class=k>as</span> <span class=nn>pd</span>
<span class=c1># 加入下面这条语句可以在 JupyterLab 上渲染画布（ JupyterLab 是天池实验室的一部分）</span>
<span class=o>%</span><span class=n>matplotlib</span> <span class=n>inline</span>
</code></pre></td></tr></table>
</div>
</div><h2 id=数据预处理>数据预处理</h2>
<p>数据预处理部分包含 <strong>数据导入</strong>，<strong>数据探索</strong>，<strong>数据整合</strong>，<strong>格式转换</strong>等多个步骤。这些步骤可穿插执行。</p>
<p>这里第一步就是<strong>数据导入</strong>。</p>
<p>Pandas 提供的 IO 工具组支持多种数据格式类型，包括基础的 CSV，JSON，SQL 格式。</p>
<p>这里用到 <code>read_csv</code> 方法</p>
<p>此方法第一个参数为文件路径, 这里对应着天池实验室挂载的数据，因为在 <strong>download</strong> 同一目录下, 所以直接写文件名即可。</p>
<p>第二个参数 <code>sep</code> 为分隔符，用于将每行分解为若干列。默认是<code>,</code>逗号。</p>
<p>第三个参数 <code>names</code> 为列名列表，当文件不包含列名时使用，列名列表中不允许有重复值。</p>
<p><strong>扩展</strong>：若我们要分析文件中包含列名呢？有个 <code>header</code> 参数可以使用，当列名是首行时，设置 <code>header=0</code>。举一反三，有时候文件首行是文件的标题，第二行才是列名，那么设置 <code>header=1</code> 即可。</p>
<p>将委员会和候选人一一对应，通过CAND_ID关联两个表</p>
<p>由于候选人和委员会的联系表中无候选人姓名，只有候选人ID（<code>CAND_ID</code>），所以需要通过<code>CAND_ID</code> 从候选人表中获取到候选人姓名，最终得到候选人与委员会联系表 <code>ccl</code>。</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># 读取候选人信息，由于原始数据没有表头，需要添加表头</span>
<span class=n>candidates</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=s2>&#34;weball20.txt&#34;</span><span class=p>,</span> <span class=n>sep</span> <span class=o>=</span> <span class=s1>&#39;|&#39;</span><span class=p>,</span><span class=n>names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;CAND_ID&#39;</span><span class=p>,</span><span class=s1>&#39;CAND_NAME&#39;</span><span class=p>,</span><span class=s1>&#39;CAND_ICI&#39;</span><span class=p>,</span><span class=s1>&#39;PTY_CD&#39;</span><span class=p>,</span><span class=s1>&#39;CAND_PTY_AFFILIATION&#39;</span><span class=p>,</span><span class=s1>&#39;TTL_RECEIPTS&#39;</span><span class=p>,</span>
                                                          <span class=s1>&#39;TRANS_FROM_AUTH&#39;</span><span class=p>,</span><span class=s1>&#39;TTL_DISB&#39;</span><span class=p>,</span><span class=s1>&#39;TRANS_TO_AUTH&#39;</span><span class=p>,</span><span class=s1>&#39;COH_BOP&#39;</span><span class=p>,</span><span class=s1>&#39;COH_COP&#39;</span><span class=p>,</span><span class=s1>&#39;CAND_CONTRIB&#39;</span><span class=p>,</span>
                                                          <span class=s1>&#39;CAND_LOANS&#39;</span><span class=p>,</span><span class=s1>&#39;OTHER_LOANS&#39;</span><span class=p>,</span><span class=s1>&#39;CAND_LOAN_REPAY&#39;</span><span class=p>,</span><span class=s1>&#39;OTHER_LOAN_REPAY&#39;</span><span class=p>,</span><span class=s1>&#39;DEBTS_OWED_BY&#39;</span><span class=p>,</span>
                                                          <span class=s1>&#39;TTL_INDIV_CONTRIB&#39;</span><span class=p>,</span><span class=s1>&#39;CAND_OFFICE_ST&#39;</span><span class=p>,</span><span class=s1>&#39;CAND_OFFICE_DISTRICT&#39;</span><span class=p>,</span><span class=s1>&#39;SPEC_ELECTION&#39;</span><span class=p>,</span><span class=s1>&#39;PRIM_ELECTION&#39;</span><span class=p>,</span><span class=s1>&#39;RUN_ELECTION&#39;</span>
                                                          <span class=p>,</span><span class=s1>&#39;GEN_ELECTION&#39;</span><span class=p>,</span><span class=s1>&#39;GEN_ELECTION_PRECENT&#39;</span><span class=p>,</span><span class=s1>&#39;OTHER_POL_CMTE_CONTRIB&#39;</span><span class=p>,</span><span class=s1>&#39;POL_PTY_CONTRIB&#39;</span><span class=p>,</span>
                                                          <span class=s1>&#39;CVG_END_DT&#39;</span><span class=p>,</span><span class=s1>&#39;INDIV_REFUNDS&#39;</span><span class=p>,</span><span class=s1>&#39;CMTE_REFUNDS&#39;</span><span class=p>])</span>
<span class=c1># 读取候选人和委员会的联系信息</span>
<span class=n>ccl</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=s2>&#34;ccl.txt&#34;</span><span class=p>,</span> <span class=n>sep</span> <span class=o>=</span> <span class=s1>&#39;|&#39;</span><span class=p>,</span><span class=n>names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;CAND_ID&#39;</span><span class=p>,</span><span class=s1>&#39;CAND_ELECTION_YR&#39;</span><span class=p>,</span><span class=s1>&#39;FEC_ELECTION_YR&#39;</span><span class=p>,</span><span class=s1>&#39;CMTE_ID&#39;</span><span class=p>,</span><span class=s1>&#39;CMTE_TP&#39;</span><span class=p>,</span><span class=s1>&#39;CMTE_DSGN&#39;</span><span class=p>,</span><span class=s1>&#39;LINKAGE_ID&#39;</span><span class=p>])</span>
</code></pre></td></tr></table>
</div>
</div><h2 id=数据整合>数据整合</h2>
<p>我们现在已导入 <code>candidates</code> 候选人信息表，<code>ccl</code> 候选人与委员会关联表两张表。均为 <code>DataFrame</code> 类型。</p>
<p>聪明的你会发现，两个表的表头都包含 <code>CAND_ID</code> 这个字段，那么这两张表会根据这个字段有所联系。那么我们可以用 <code>merge</code> 这个神奇的方法合并两张表。</p>
<p><code>merge</code> 方法有几个重要的参数如下：</p>
<ol>
<li><code>left </code>： 在这里就是我们要合并左边的 <code>ccl</code> 表。</li>
<li><code>right</code> ： 在这里就是我们要合并右边的 <code>candidates</code> 表。</li>
<li><code>how </code>： 这是个带有默认参数的隐藏参数，默认为 <code>inner</code> （内连接），学过 <code>SQL</code> 的同学都懂得～ 肯定还会包含 outer（外链接）、left（左连接）、right（右连接）</li>
<li><code>on</code> ：这个参数用来连接列名，若没有其它连接项，默认会把左右两个表头的交集字段作为连接字段。下面的代码是省略的写法，也可以这样表示 <code>ccl = pd.merge(ccl, candidates, on="CAND_ID", how="inner")</code></li>
<li><code>left_on</code> ：用来指定左侧作为连接的表头。</li>
<li><code>right_on</code>：用来指定右侧作为连接的表头， 下面的代码是省略的写法，也可以这样表示 <code>ccl = pd.merge(ccl, candidates, left_on="CAND_ID", right_on="CAND_ID", how="inner")</code></li>
</ol>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># 关联两个表数据</span>
<span class=n>ccl</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>merge</span><span class=p>(</span><span class=n>ccl</span><span class=p>,</span> <span class=n>candidates</span><span class=p>)</span>
<span class=c1># 提取出所需要的列</span>
<span class=n>ccl</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>ccl</span><span class=p>,</span> <span class=n>columns</span><span class=o>=</span><span class=p>[</span> <span class=s1>&#39;CMTE_ID&#39;</span><span class=p>,</span><span class=s1>&#39;CAND_ID&#39;</span><span class=p>,</span> <span class=s1>&#39;CAND_NAME&#39;</span><span class=p>,</span><span class=s1>&#39;CAND_PTY_AFFILIATION&#39;</span><span class=p>])</span>
</code></pre></td></tr></table>
</div>
</div><div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># 读取个人捐赠数据，由于原始数据没有表头，需要添加表头</span>
<span class=c1># 提示：读取本文件大概需要5-10s</span>
<span class=n>itcont</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=s1>&#39;itcont_2020_20200722_20200820.txt&#39;</span><span class=p>,</span> <span class=n>sep</span><span class=o>=</span><span class=s1>&#39;|&#39;</span><span class=p>,</span><span class=n>names</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;CMTE_ID&#39;</span><span class=p>,</span><span class=s1>&#39;AMNDT_IND&#39;</span><span class=p>,</span><span class=s1>&#39;RPT_TP&#39;</span><span class=p>,</span><span class=s1>&#39;TRANSACTION_PGI&#39;</span><span class=p>,</span><span class=s1>&#39;IMAGE_NUM&#39;</span><span class=p>,</span><span class=s1>&#39;TRANSACTION_TP&#39;</span><span class=p>,</span><span class=s1>&#39;ENTITY_TP&#39;</span><span class=p>,</span><span class=s1>&#39;NAME&#39;</span><span class=p>,</span><span class=s1>&#39;CITY&#39;</span><span class=p>,</span><span class=s1>&#39;STATE&#39;</span><span class=p>,</span><span class=s1>&#39;ZIP_CODE&#39;</span><span class=p>,</span><span class=s1>&#39;EMPLOYER&#39;</span><span class=p>,</span><span class=s1>&#39;OCCUPATION&#39;</span><span class=p>,</span><span class=s1>&#39;TRANSACTION_DT&#39;</span><span class=p>,</span><span class=s1>&#39;TRANSACTION_AMT&#39;</span><span class=p>,</span><span class=s1>&#39;OTHER_ID&#39;</span><span class=p>,</span><span class=s1>&#39;TRAN_ID&#39;</span><span class=p>,</span><span class=s1>&#39;FILE_NUM&#39;</span><span class=p>,</span><span class=s1>&#39;MEMO_CD&#39;</span><span class=p>,</span><span class=s1>&#39;MEMO_TEXT&#39;</span><span class=p>,</span><span class=s1>&#39;SUB_ID&#39;</span><span class=p>],</span><span class=n>low_memory</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
</code></pre></td></tr></table>
</div>
</div><div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># 将候选人与委员会关系表ccl和个人捐赠数据表itcont合并，通过 CMTE_ID</span>
<span class=n>c_itcont</span> <span class=o>=</span>  <span class=n>pd</span><span class=o>.</span><span class=n>merge</span><span class=p>(</span><span class=n>ccl</span><span class=p>,</span> <span class=n>itcont</span><span class=p>)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id=数据探索>数据探索</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># 查看目前数据前6行, 若省略行数，默认显示5行</span>
<span class=n>c_itcont</span><span class=o>.</span><span class=n>head</span><span class=p>(</span><span class=mi>6</span><span class=p>)</span>
</code></pre></td></tr></table>
</div>
</div><div>
<style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}<pre><code>.dataframe tbody tr th{vertical-align:top}.dataframe thead th{text-align:right}</code></pre><p></style></p>
<table border=1 class=dataframe>
<thead>
<tr style=text-align:right>
<th></th>
<th>CMTE_ID</th>
<th>CAND_ID</th>
<th>CAND_NAME</th>
<th>CAND_PTY_AFFILIATION</th>
<th>AMNDT_IND</th>
<th>RPT_TP</th>
<th>TRANSACTION_PGI</th>
<th>IMAGE_NUM</th>
<th>TRANSACTION_TP</th>
<th>ENTITY_TP</th>
<th>...</th>
<th>EMPLOYER</th>
<th>OCCUPATION</th>
<th>TRANSACTION_DT</th>
<th>TRANSACTION_AMT</th>
<th>OTHER_ID</th>
<th>TRAN_ID</th>
<th>FILE_NUM</th>
<th>MEMO_CD</th>
<th>MEMO_TEXT</th>
<th>SUB_ID</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>C00698084</td>
<td>H0AZ02182</td>
<td>MORGAN, JOSEPH DAVID</td>
<td>REP</td>
<td>A</td>
<td>Q3</td>
<td>P2020</td>
<td>202010069285031369</td>
<td>15</td>
<td>IND</td>
<td>...</td>
<td>RETIRED</td>
<td>RETIRED</td>
<td>7242020</td>
<td>100</td>
<td>NaN</td>
<td>SA11AI.4909</td>
<td>1444070</td>
<td>NaN</td>
<td>NaN</td>
<td>4100820201856947991</td>
</tr>
<tr>
<th>1</th>
<td>C00698084</td>
<td>H0AZ02182</td>
<td>MORGAN, JOSEPH DAVID</td>
<td>REP</td>
<td>A</td>
<td>Q3</td>
<td>P2020</td>
<td>202010069285031369</td>
<td>15</td>
<td>IND</td>
<td>...</td>
<td>VA HOSPITAL</td>
<td>LAB TECH</td>
<td>7242020</td>
<td>40</td>
<td>NaN</td>
<td>SA11AI.4908</td>
<td>1444070</td>
<td>NaN</td>
<td>NaN</td>
<td>4100820201856947993</td>
</tr>
<tr>
<th>2</th>
<td>C00698084</td>
<td>H0AZ02182</td>
<td>MORGAN, JOSEPH DAVID</td>
<td>REP</td>
<td>A</td>
<td>Q3</td>
<td>P2020</td>
<td>202010069285031370</td>
<td>15</td>
<td>IND</td>
<td>...</td>
<td>VA HOSPITAL</td>
<td>LAB TECH</td>
<td>7312020</td>
<td>40</td>
<td>NaN</td>
<td>SA11AI.4916</td>
<td>1444070</td>
<td>NaN</td>
<td>NaN</td>
<td>4100820201856947994</td>
</tr>
<tr>
<th>3</th>
<td>C00725697</td>
<td>H0AZ03461</td>
<td>WOOD, DANIEL</td>
<td>REP</td>
<td>A</td>
<td>Q3</td>
<td>G2020</td>
<td>202010079285052516</td>
<td>15</td>
<td>IND</td>
<td>...</td>
<td>POWERS-LEAVITT</td>
<td>INSURANCE AGENT</td>
<td>8102020</td>
<td>300</td>
<td>NaN</td>
<td>SA11AI.4683</td>
<td>1444556</td>
<td>NaN</td>
<td>NaN</td>
<td>4100920201857257629</td>
</tr>
<tr>
<th>4</th>
<td>C00725697</td>
<td>H0AZ03461</td>
<td>WOOD, DANIEL</td>
<td>REP</td>
<td>A</td>
<td>Q3</td>
<td>G2020</td>
<td>202010079285052518</td>
<td>15</td>
<td>IND</td>
<td>...</td>
<td>UNEMPLOYED</td>
<td>NaN</td>
<td>8072020</td>
<td>500</td>
<td>NaN</td>
<td>SA11AI.4612</td>
<td>1444556</td>
<td>NaN</td>
<td>NaN</td>
<td>4100920201857257635</td>
</tr>
<tr>
<th>5</th>
<td>C00725697</td>
<td>H0AZ03461</td>
<td>WOOD, DANIEL</td>
<td>REP</td>
<td>A</td>
<td>Q3</td>
<td>G2020</td>
<td>202010079285052519</td>
<td>15</td>
<td>IND</td>
<td>...</td>
<td>SELF-EMPLOYED</td>
<td>DVM</td>
<td>7312020</td>
<td>500</td>
<td>NaN</td>
<td>SA11AI.4593</td>
<td>1444556</td>
<td>NaN</td>
<td>NaN</td>
<td>4100920201857257636</td>
</tr>
</tbody>
</table>
<p>6 rows × 24 columns</p>
</div>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># 查看目前数据后3行, 若省略行数，默认显示5行</span>
<span class=n>c_itcont</span><span class=o>.</span><span class=n>head</span><span class=p>(</span><span class=n>n</span><span class=o>=</span><span class=mi>3</span><span class=p>)</span>
</code></pre></td></tr></table>
</div>
</div><div>
<style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}<pre><code>.dataframe tbody tr th{vertical-align:top}.dataframe thead th{text-align:right}</code></pre><p></style></p>
<table border=1 class=dataframe>
<thead>
<tr style=text-align:right>
<th></th>
<th>CMTE_ID</th>
<th>CAND_ID</th>
<th>CAND_NAME</th>
<th>CAND_PTY_AFFILIATION</th>
<th>AMNDT_IND</th>
<th>RPT_TP</th>
<th>TRANSACTION_PGI</th>
<th>IMAGE_NUM</th>
<th>TRANSACTION_TP</th>
<th>ENTITY_TP</th>
<th>...</th>
<th>EMPLOYER</th>
<th>OCCUPATION</th>
<th>TRANSACTION_DT</th>
<th>TRANSACTION_AMT</th>
<th>OTHER_ID</th>
<th>TRAN_ID</th>
<th>FILE_NUM</th>
<th>MEMO_CD</th>
<th>MEMO_TEXT</th>
<th>SUB_ID</th>
</tr>
</thead>
<tbody>
<tr>
<th>0</th>
<td>C00698084</td>
<td>H0AZ02182</td>
<td>MORGAN, JOSEPH DAVID</td>
<td>REP</td>
<td>A</td>
<td>Q3</td>
<td>P2020</td>
<td>202010069285031369</td>
<td>15</td>
<td>IND</td>
<td>...</td>
<td>RETIRED</td>
<td>RETIRED</td>
<td>7242020</td>
<td>100</td>
<td>NaN</td>
<td>SA11AI.4909</td>
<td>1444070</td>
<td>NaN</td>
<td>NaN</td>
<td>4100820201856947991</td>
</tr>
<tr>
<th>1</th>
<td>C00698084</td>
<td>H0AZ02182</td>
<td>MORGAN, JOSEPH DAVID</td>
<td>REP</td>
<td>A</td>
<td>Q3</td>
<td>P2020</td>
<td>202010069285031369</td>
<td>15</td>
<td>IND</td>
<td>...</td>
<td>VA HOSPITAL</td>
<td>LAB TECH</td>
<td>7242020</td>
<td>40</td>
<td>NaN</td>
<td>SA11AI.4908</td>
<td>1444070</td>
<td>NaN</td>
<td>NaN</td>
<td>4100820201856947993</td>
</tr>
<tr>
<th>2</th>
<td>C00698084</td>
<td>H0AZ02182</td>
<td>MORGAN, JOSEPH DAVID</td>
<td>REP</td>
<td>A</td>
<td>Q3</td>
<td>P2020</td>
<td>202010069285031370</td>
<td>15</td>
<td>IND</td>
<td>...</td>
<td>VA HOSPITAL</td>
<td>LAB TECH</td>
<td>7312020</td>
<td>40</td>
<td>NaN</td>
<td>SA11AI.4916</td>
<td>1444070</td>
<td>NaN</td>
<td>NaN</td>
<td>4100820201856947994</td>
</tr>
</tbody>
</table>
<p>3 rows × 24 columns</p>
</div>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># 查看数据规模 多少行 多少列</span>
<span class=n>c_itcont</span><span class=o>.</span><span class=n>shape</span>
</code></pre></td></tr></table>
</div>
</div><pre><code>(756205, 24)
</code></pre>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># 查看整体数据信息，包括每个字段的名称、非空数量、字段的数据类型</span>
<span class=n>c_itcont</span><span class=o>.</span><span class=n>info</span><span class=p>()</span>
</code></pre></td></tr></table>
</div>
</div><pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 756205 entries, 0 to 756204
Data columns (total 24 columns):
CMTE_ID                 756205 non-null object
CAND_ID                 756205 non-null object
CAND_NAME               756205 non-null object
CAND_PTY_AFFILIATION    756205 non-null object
AMNDT_IND               756205 non-null object
RPT_TP                  756205 non-null object
TRANSACTION_PGI         756205 non-null object
IMAGE_NUM               756205 non-null int64
TRANSACTION_TP          756205 non-null object
ENTITY_TP               756205 non-null object
NAME                    756205 non-null object
CITY                    756159 non-null object
STATE                   756160 non-null object
ZIP_CODE                756092 non-null object
EMPLOYER                737413 non-null object
OCCUPATION              741294 non-null object
TRANSACTION_DT          756205 non-null int64
TRANSACTION_AMT         756205 non-null int64
OTHER_ID                647200 non-null object
TRAN_ID                 756205 non-null object
FILE_NUM                756205 non-null int64
MEMO_CD                 220 non-null object
MEMO_TEXT               655693 non-null object
SUB_ID                  756205 non-null int64
dtypes: int64(5), object(19)
memory usage: 144.2+ MB
</code></pre>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># 查看数据表中数据类型的列的数据分布情况</span>
<span class=n>c_itcont</span><span class=o>.</span><span class=n>describe</span><span class=p>()</span>
</code></pre></td></tr></table>
</div>
</div><div>
<style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}<pre><code>.dataframe tbody tr th{vertical-align:top}.dataframe thead th{text-align:right}</code></pre><p></style></p>
<table border=1 class=dataframe>
<thead>
<tr style=text-align:right>
<th></th>
<th>IMAGE_NUM</th>
<th>TRANSACTION_DT</th>
<th>TRANSACTION_AMT</th>
<th>FILE_NUM</th>
<th>SUB_ID</th>
</tr>
</thead>
<tbody>
<tr>
<th>count</th>
<td>7.562050e+05</td>
<td>7.562050e+05</td>
<td>7.562050e+05</td>
<td>7.562050e+05</td>
<td>7.562050e+05</td>
</tr>
<tr>
<th>mean</th>
<td>2.020090e+17</td>
<td>7.887799e+06</td>
<td>1.504307e+02</td>
<td>1.439133e+06</td>
<td>4.091288e+18</td>
</tr>
<tr>
<th>std</th>
<td>4.071886e+11</td>
<td>3.857874e+05</td>
<td>2.320452e+03</td>
<td>2.325325e+03</td>
<td>4.642365e+15</td>
</tr>
<tr>
<th>min</th>
<td>2.020072e+17</td>
<td>7.222020e+06</td>
<td>-5.600000e+03</td>
<td>1.427865e+06</td>
<td>4.072420e+18</td>
</tr>
<tr>
<th>25%</th>
<td>2.020092e+17</td>
<td>7.312020e+06</td>
<td>2.000000e+01</td>
<td>1.440015e+06</td>
<td>4.092520e+18</td>
</tr>
<tr>
<th>50%</th>
<td>2.020092e+17</td>
<td>8.102020e+06</td>
<td>3.500000e+01</td>
<td>1.440320e+06</td>
<td>4.093020e+18</td>
</tr>
<tr>
<th>75%</th>
<td>2.020092e+17</td>
<td>8.152020e+06</td>
<td>1.000000e+02</td>
<td>1.440320e+06</td>
<td>4.093020e+18</td>
</tr>
<tr>
<th>max</th>
<td>2.020101e+17</td>
<td>8.202020e+06</td>
<td>1.500000e+06</td>
<td>1.445380e+06</td>
<td>4.101020e+18</td>
</tr>
</tbody>
</table>
</div>
<h3 id=格式转换>格式转换</h3>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1>#空值处理，统一填充 NOT PROVIDED</span>
<span class=n>c_itcont</span><span class=p>[</span><span class=s1>&#39;STATE&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>fillna</span><span class=p>(</span><span class=s1>&#39;NOT PROVIDED&#39;</span><span class=p>,</span><span class=n>inplace</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=n>c_itcont</span><span class=p>[</span><span class=s1>&#39;EMPLOYER&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>fillna</span><span class=p>(</span><span class=s1>&#39;NOT PROVIDED&#39;</span><span class=p>,</span><span class=n>inplace</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=n>c_itcont</span><span class=p>[</span><span class=s1>&#39;OCCUPATION&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>fillna</span><span class=p>(</span><span class=s1>&#39;NOT PROVIDED&#39;</span><span class=p>,</span><span class=n>inplace</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<span class=c1># 对日期TRANSACTION_DT列进行处理</span>
<span class=n>c_itcont</span><span class=p>[</span><span class=s1>&#39;TRANSACTION_DT&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=n>c_itcont</span><span class=p>[</span><span class=s1>&#39;TRANSACTION_DT&#39;</span><span class=p>]</span> <span class=o>.</span><span class=n>astype</span><span class=p>(</span><span class=nb>str</span><span class=p>)</span>
<span class=c1># 将日期格式改为年月日  7242020	</span>
<span class=n>c_itcont</span><span class=p>[</span><span class=s1>&#39;TRANSACTION_DT&#39;</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span><span class=n>i</span><span class=p>[</span><span class=mi>3</span><span class=p>:</span><span class=mi>7</span><span class=p>]</span><span class=o>+</span><span class=n>i</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>+</span><span class=n>i</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=mi>3</span><span class=p>]</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>c_itcont</span><span class=p>[</span><span class=s1>&#39;TRANSACTION_DT&#39;</span><span class=p>]</span> <span class=p>]</span>
</code></pre></td></tr></table>
</div>
</div><h2 id=绘制收到捐赠额最多的两位候选人的总捐赠额变化趋势图>绘制收到捐赠额最多的两位候选人的总捐赠额变化趋势图</h2>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># 计算每个总统候选人所获得的捐款总额，然后排序，取前二位</span>
<span class=n>c_itcont</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s2>&#34;CAND_NAME&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span><span class=o>.</span><span class=n>sort_values</span><span class=p>(</span><span class=s2>&#34;TRANSACTION_AMT&#34;</span><span class=p>,</span><span class=n>ascending</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span><span class=o>.</span><span class=n>head</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
</code></pre></td></tr></table>
</div>
</div><div>
<style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}<pre><code>.dataframe tbody tr th{vertical-align:top}.dataframe thead th{text-align:right}</code></pre><p></style></p>
<table border=1 class=dataframe>
<thead>
<tr style=text-align:right>
<th></th>
<th>IMAGE_NUM</th>
<th>TRANSACTION_AMT</th>
<th>FILE_NUM</th>
<th>SUB_ID</th>
</tr>
<tr>
<th>CAND_NAME</th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th>BIDEN, JOSEPH R JR</th>
<td>1.025834e+23</td>
<td>68111142.0</td>
<td>7.307496e+11</td>
<td>2.077270e+24</td>
</tr>
<tr>
<th>TRUMP, DONALD J.</th>
<td>1.181873e+22</td>
<td>16594982.0</td>
<td>8.417584e+10</td>
<td>2.396038e+23</td>
</tr>
</tbody>
</table>
</div>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># 提取需要的数据列</span>
<span class=n>c_itcont0</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>c_itcont</span><span class=p>,</span> <span class=n>columns</span><span class=o>=</span><span class=p>[</span> <span class=s1>&#39;CAND_NAME&#39;</span><span class=p>,</span> <span class=s1>&#39;TRANSACTION_AMT&#39;</span><span class=p>,</span> <span class=s1>&#39;TRANSACTION_DT&#39;</span><span class=p>])</span>

</code></pre></td></tr></table>
</div>
</div><div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># 已知所获得的捐款总额前两位的总统候选人分别是&#39;BIDEN, JOSEPH R JR&#39;, &#39;TRUMP, DONALD J.&#39;， 筛选出来</span>
<span class=n>c_itcont1</span> <span class=o>=</span> <span class=n>c_itcont0</span><span class=p>[</span><span class=n>c_itcont0</span><span class=p>[</span><span class=s1>&#39;CAND_NAME&#39;</span><span class=p>]</span><span class=o>.</span><span class=n>isin</span><span class=p>([</span><span class=s1>&#39;BIDEN, JOSEPH R JR&#39;</span><span class=p>,</span> <span class=s1>&#39;TRUMP, DONALD J.&#39;</span><span class=p>])]</span>

</code></pre></td></tr></table>
</div>
</div><div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># 因为同一天会有多笔捐款入帐，需要做分组求和</span>
<span class=n>c_itcont2</span> <span class=o>=</span> <span class=n>c_itcont1</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;CAND_NAME&#39;</span><span class=p>,</span> <span class=s1>&#39;TRANSACTION_DT&#39;</span><span class=p>])</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>

</code></pre></td></tr></table>
</div>
</div><div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># 因为我们要看总额的趋势图，所以要做累加</span>
<span class=n>c_itcont3</span> <span class=o>=</span> <span class=n>c_itcont2</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;CAND_NAME&#39;</span><span class=p>,</span> <span class=p>])</span><span class=o>.</span><span class=n>cumsum</span><span class=p>()</span>

</code></pre></td></tr></table>
</div>
</div><div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># 现在很快可以达到预期目标了</span>
<span class=n>c_itcont3</span>
</code></pre></td></tr></table>
</div>
</div><div>
<style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}<pre><code>.dataframe tbody tr th{vertical-align:top}.dataframe thead th{text-align:right}</code></pre><p></style></p>
<table border=1 class=dataframe>
<thead>
<tr style=text-align:right>
<th></th>
<th></th>
<th>TRANSACTION_AMT</th>
</tr>
<tr>
<th>CAND_NAME</th>
<th>TRANSACTION_DT</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th rowspan=30 valign=top>BIDEN, JOSEPH R JR</th>
<th>2020722</th>
<td>888622</td>
</tr>
<tr>
<th>2020723</th>
<td>1852227</td>
</tr>
<tr>
<th>2020724</th>
<td>3024292</td>
</tr>
<tr>
<th>2020725</th>
<td>3943847</td>
</tr>
<tr>
<th>2020726</th>
<td>5052629</td>
</tr>
<tr>
<th>2020727</th>
<td>6150050</td>
</tr>
<tr>
<th>2020728</th>
<td>7625248</td>
</tr>
<tr>
<th>2020729</th>
<td>8900851</td>
</tr>
<tr>
<th>2020730</th>
<td>9964382</td>
</tr>
<tr>
<th>2020731</th>
<td>12305972</td>
</tr>
<tr>
<th>2020801</th>
<td>13391021</td>
</tr>
<tr>
<th>2020802</th>
<td>14208260</td>
</tr>
<tr>
<th>2020803</th>
<td>15063070</td>
</tr>
<tr>
<th>2020804</th>
<td>16138452</td>
</tr>
<tr>
<th>2020805</th>
<td>17317433</td>
</tr>
<tr>
<th>2020806</th>
<td>18293448</td>
</tr>
<tr>
<th>2020807</th>
<td>19246279</td>
</tr>
<tr>
<th>2020808</th>
<td>20152637</td>
</tr>
<tr>
<th>2020809</th>
<td>20996972</td>
</tr>
<tr>
<th>2020810</th>
<td>22015682</td>
</tr>
<tr>
<th>2020811</th>
<td>26905056</td>
</tr>
<tr>
<th>2020812</th>
<td>32932121</td>
</tr>
<tr>
<th>2020813</th>
<td>38604052</td>
</tr>
<tr>
<th>2020814</th>
<td>41666574</td>
</tr>
<tr>
<th>2020815</th>
<td>44125928</td>
</tr>
<tr>
<th>2020816</th>
<td>46254874</td>
</tr>
<tr>
<th>2020817</th>
<td>49826137</td>
</tr>
<tr>
<th>2020818</th>
<td>53584270</td>
</tr>
<tr>
<th>2020819</th>
<td>58989963</td>
</tr>
<tr>
<th>2020820</th>
<td>68111142</td>
</tr>
<tr>
<th rowspan=30 valign=top>TRUMP, DONALD J.</th>
<th>2020722</th>
<td>330603</td>
</tr>
<tr>
<th>2020723</th>
<td>554920</td>
</tr>
<tr>
<th>2020724</th>
<td>828209</td>
</tr>
<tr>
<th>2020725</th>
<td>1035861</td>
</tr>
<tr>
<th>2020726</th>
<td>1529042</td>
</tr>
<tr>
<th>2020727</th>
<td>2044076</td>
</tr>
<tr>
<th>2020728</th>
<td>2499171</td>
</tr>
<tr>
<th>2020729</th>
<td>3216022</td>
</tr>
<tr>
<th>2020730</th>
<td>4346359</td>
</tr>
<tr>
<th>2020731</th>
<td>6338855</td>
</tr>
<tr>
<th>2020801</th>
<td>6688166</td>
</tr>
<tr>
<th>2020802</th>
<td>6925401</td>
</tr>
<tr>
<th>2020803</th>
<td>7273299</td>
</tr>
<tr>
<th>2020804</th>
<td>7862177</td>
</tr>
<tr>
<th>2020805</th>
<td>8175442</td>
</tr>
<tr>
<th>2020806</th>
<td>8501605</td>
</tr>
<tr>
<th>2020807</th>
<td>8899471</td>
</tr>
<tr>
<th>2020808</th>
<td>9124955</td>
</tr>
<tr>
<th>2020809</th>
<td>9404411</td>
</tr>
<tr>
<th>2020810</th>
<td>10286254</td>
</tr>
<tr>
<th>2020811</th>
<td>10856855</td>
</tr>
<tr>
<th>2020812</th>
<td>11540551</td>
</tr>
<tr>
<th>2020813</th>
<td>12298919</td>
</tr>
<tr>
<th>2020814</th>
<td>12717476</td>
</tr>
<tr>
<th>2020815</th>
<td>13483142</td>
</tr>
<tr>
<th>2020816</th>
<td>13812398</td>
</tr>
<tr>
<th>2020817</th>
<td>14453930</td>
</tr>
<tr>
<th>2020818</th>
<td>15086445</td>
</tr>
<tr>
<th>2020819</th>
<td>15665254</td>
</tr>
<tr>
<th>2020820</th>
<td>16594982</td>
</tr>
</tbody>
</table>
</div>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># 整理下排列索引，这里用到了索引和列标题转换与转置操作</span>
<span class=n>c_itcont4</span> <span class=o>=</span> <span class=n>c_itcont3</span><span class=o>.</span><span class=n>unstack</span><span class=p>()</span><span class=o>.</span><span class=n>T</span>
<span class=n>c_itcont4</span>
</code></pre></td></tr></table>
</div>
</div><div>
<style scoped>.dataframe tbody tr th:only-of-type{vertical-align:middle}<pre><code>.dataframe tbody tr th{vertical-align:top}.dataframe thead th{text-align:right}</code></pre><p></style></p>
<table border=1 class=dataframe>
<thead>
<tr style=text-align:right>
<th></th>
<th>CAND_NAME</th>
<th>BIDEN, JOSEPH R JR</th>
<th>TRUMP, DONALD J.</th>
</tr>
<tr>
<th></th>
<th>TRANSACTION_DT</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<th rowspan=30 valign=top>TRANSACTION_AMT</th>
<th>2020722</th>
<td>888622</td>
<td>330603</td>
</tr>
<tr>
<th>2020723</th>
<td>1852227</td>
<td>554920</td>
</tr>
<tr>
<th>2020724</th>
<td>3024292</td>
<td>828209</td>
</tr>
<tr>
<th>2020725</th>
<td>3943847</td>
<td>1035861</td>
</tr>
<tr>
<th>2020726</th>
<td>5052629</td>
<td>1529042</td>
</tr>
<tr>
<th>2020727</th>
<td>6150050</td>
<td>2044076</td>
</tr>
<tr>
<th>2020728</th>
<td>7625248</td>
<td>2499171</td>
</tr>
<tr>
<th>2020729</th>
<td>8900851</td>
<td>3216022</td>
</tr>
<tr>
<th>2020730</th>
<td>9964382</td>
<td>4346359</td>
</tr>
<tr>
<th>2020731</th>
<td>12305972</td>
<td>6338855</td>
</tr>
<tr>
<th>2020801</th>
<td>13391021</td>
<td>6688166</td>
</tr>
<tr>
<th>2020802</th>
<td>14208260</td>
<td>6925401</td>
</tr>
<tr>
<th>2020803</th>
<td>15063070</td>
<td>7273299</td>
</tr>
<tr>
<th>2020804</th>
<td>16138452</td>
<td>7862177</td>
</tr>
<tr>
<th>2020805</th>
<td>17317433</td>
<td>8175442</td>
</tr>
<tr>
<th>2020806</th>
<td>18293448</td>
<td>8501605</td>
</tr>
<tr>
<th>2020807</th>
<td>19246279</td>
<td>8899471</td>
</tr>
<tr>
<th>2020808</th>
<td>20152637</td>
<td>9124955</td>
</tr>
<tr>
<th>2020809</th>
<td>20996972</td>
<td>9404411</td>
</tr>
<tr>
<th>2020810</th>
<td>22015682</td>
<td>10286254</td>
</tr>
<tr>
<th>2020811</th>
<td>26905056</td>
<td>10856855</td>
</tr>
<tr>
<th>2020812</th>
<td>32932121</td>
<td>11540551</td>
</tr>
<tr>
<th>2020813</th>
<td>38604052</td>
<td>12298919</td>
</tr>
<tr>
<th>2020814</th>
<td>41666574</td>
<td>12717476</td>
</tr>
<tr>
<th>2020815</th>
<td>44125928</td>
<td>13483142</td>
</tr>
<tr>
<th>2020816</th>
<td>46254874</td>
<td>13812398</td>
</tr>
<tr>
<th>2020817</th>
<td>49826137</td>
<td>14453930</td>
</tr>
<tr>
<th>2020818</th>
<td>53584270</td>
<td>15086445</td>
</tr>
<tr>
<th>2020819</th>
<td>58989963</td>
<td>15665254</td>
</tr>
<tr>
<th>2020820</th>
<td>68111142</td>
<td>16594982</td>
</tr>
</tbody>
</table>
</div>
<p>绘制收到捐赠额最多的两位候选人的总捐赠额变化趋势图</p>
<p>这里使用 <code>plot</code> 方法绘制趋势图，（由于天池实验室环境不是最新的库，兼容问题会报警告，但是不影响出图。 我在其它环境测试没问题，图的横坐标会有日期显示的。）</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># grid参数 用来显示后面的辅助网格线， rot 使横坐标的日期以45度排列， 不会导致产生字符过长导致叠加的问题。（由于天池实验室环境不是最新的库，兼容问题会报警告，横坐标的日期标注无法显示。）</span>
<span class=n>c_itcont4</span><span class=o>.</span><span class=n>plot</span><span class=p>(</span><span class=n>grid</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>rot</span><span class=o>=</span><span class=mi>45</span><span class=p>)</span>
</code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=/svg/loading.min.svg data-src=/20210101-%E5%A4%A9%E6%B1%A0%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%AB%9E%E8%B5%9B-%E8%B6%8B%E5%8A%BF%E5%9B%BE%E4%B8%8E%E6%A1%91%E5%9F%BA%E5%9B%BE%E5%88%86%E6%9E%90%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E5%80%99%E9%80%89%E4%BA%BA%E5%96%9C%E5%A5%BD%E5%BA%A6/trend.png data-srcset="/20210101-%E5%A4%A9%E6%B1%A0%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%AB%9E%E8%B5%9B-%E8%B6%8B%E5%8A%BF%E5%9B%BE%E4%B8%8E%E6%A1%91%E5%9F%BA%E5%9B%BE%E5%88%86%E6%9E%90%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E5%80%99%E9%80%89%E4%BA%BA%E5%96%9C%E5%A5%BD%E5%BA%A6/trend.png, /20210101-%E5%A4%A9%E6%B1%A0%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%AB%9E%E8%B5%9B-%E8%B6%8B%E5%8A%BF%E5%9B%BE%E4%B8%8E%E6%A1%91%E5%9F%BA%E5%9B%BE%E5%88%86%E6%9E%90%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E5%80%99%E9%80%89%E4%BA%BA%E5%96%9C%E5%A5%BD%E5%BA%A6/trend.png 1.5x, /20210101-%E5%A4%A9%E6%B1%A0%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%AB%9E%E8%B5%9B-%E8%B6%8B%E5%8A%BF%E5%9B%BE%E4%B8%8E%E6%A1%91%E5%9F%BA%E5%9B%BE%E5%88%86%E6%9E%90%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E5%80%99%E9%80%89%E4%BA%BA%E5%96%9C%E5%A5%BD%E5%BA%A6/trend.png 2x" data-sizes=auto alt=/20210101-%E5%A4%A9%E6%B1%A0%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%AB%9E%E8%B5%9B-%E8%B6%8B%E5%8A%BF%E5%9B%BE%E4%B8%8E%E6%A1%91%E5%9F%BA%E5%9B%BE%E5%88%86%E6%9E%90%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E5%80%99%E9%80%89%E4%BA%BA%E5%96%9C%E5%A5%BD%E5%BA%A6/trend.png title=趋势图 width=362 height=264></p>
<h3 id=结论>结论</h3>
<p>由趋势图可以看出，在7月22日至8月20日期间，拜登收到的捐款总额明显高于特朗普。且在8月份有更为显著的变化。</p>
<h2 id=使用桑基图分析美国各州对党派的贡献度>使用桑基图分析美国各州对党派的贡献度</h2>
<p>桑基图（Sankey），即桑基能量分流图，是一种高级可视化图形。常用于金融等数据的可视化分析。最明显的特征就是，始末端的分支宽度总和相等，即所有主支宽度的总和应与所有分出去的分支宽度的总和相等，保持能量的平衡。</p>
<p>一个州的捐款额可能会流向不同的党派，用桑基图表示的效果就非常好。可以很清楚看出某个党派的贡献流向。</p>
<p>这里要用到第三方库 <code>pyecharts</code>，用来画桑吉图比较方便，还支持交互式操作（鼠标悬停某条能量线高亮并显示金额数量），首先安装第三方库</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=err>!</span><span class=n>pip</span> <span class=n>install</span> <span class=n>pyecharts</span> <span class=o>--</span><span class=n>user</span>
</code></pre></td></tr></table>
</div>
</div><pre><code>Looking in indexes: https://mirrors.aliyun.com/pypi/simple
Requirement already satisfied: pyecharts in /data/nas/workspace/envs/python3.6/site-packages (1.9.0)
Requirement already satisfied: prettytable in /data/nas/workspace/envs/python3.6/site-packages (from pyecharts) (1.0.1)
Requirement already satisfied: simplejson in /data/nas/workspace/envs/python3.6/site-packages (from pyecharts) (3.17.2)
Requirement already satisfied: jinja2 in /opt/conda/lib/python3.6/site-packages (from pyecharts) (2.11.2)
Requirement already satisfied: setuptools in /opt/conda/lib/python3.6/site-packages (from prettytable-&gt;pyecharts) (49.6.0)
Requirement already satisfied: wcwidth in /opt/conda/lib/python3.6/site-packages (from prettytable-&gt;pyecharts) (0.2.5)
Requirement already satisfied: MarkupSafe&gt;=0.23 in /opt/conda/lib/python3.6/site-packages (from jinja2-&gt;pyecharts) (1.1.1)
</code></pre>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># 提取需要的数据列</span>
<span class=n>c_itcont5</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>c_itcont</span><span class=p>,</span> <span class=n>columns</span><span class=o>=</span><span class=p>[</span> <span class=s1>&#39;STATE&#39;</span><span class=p>,</span> <span class=s1>&#39;TRANSACTION_AMT&#39;</span><span class=p>,</span> <span class=s1>&#39;CAND_PTY_AFFILIATION&#39;</span><span class=p>])</span>
</code></pre></td></tr></table>
</div>
</div><div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># 提取党派集合</span>
<span class=n>c_itcont_CAND_PTY_AFFILIATION</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>c_itcont5</span><span class=p>,</span><span class=n>columns</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;CAND_PTY_AFFILIATION&#39;</span><span class=p>])</span>
<span class=n>cgc</span> <span class=o>=</span> <span class=n>c_itcont_CAND_PTY_AFFILIATION</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;CAND_PTY_AFFILIATION&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>count</span><span class=p>()</span>
<span class=n>node2</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>cgc</span><span class=o>.</span><span class=n>index</span><span class=p>)</span>
<span class=n>node2</span>
</code></pre></td></tr></table>
</div>
</div><pre><code>['BDY',
 'CON',
 'DEM',
 'DFL',
 'GRE',
 'IND',
 'LIB',
 'NON',
 'NPA',
 'OTH',
 'REP',
 'UNK']
</code></pre>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># 提取州集合</span>
<span class=n>c_itcont_STATE</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>(</span><span class=n>c_itcont5</span><span class=p>,</span><span class=n>columns</span><span class=o>=</span><span class=p>[</span><span class=s1>&#39;STATE&#39;</span><span class=p>])</span>
<span class=n>sgc</span> <span class=o>=</span> <span class=n>c_itcont_STATE</span><span class=o>.</span><span class=n>groupby</span><span class=p>(</span><span class=s1>&#39;STATE&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>count</span><span class=p>()</span>
<span class=n>node1</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>sgc</span><span class=o>.</span><span class=n>index</span><span class=p>)</span>
</code></pre></td></tr></table>
</div>
</div><div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span><span class=lnt>61
</span><span class=lnt>62
</span><span class=lnt>63
</span><span class=lnt>64
</span><span class=lnt>65
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># 为方便阅读， 引入汉化字典</span>
<span class=n>scp</span> <span class=o>=</span> <span class=p>{</span><span class=s1>&#39;AA&#39;</span><span class=p>:</span> <span class=s1>&#39;美洲军&#39;</span><span class=p>,</span>
 <span class=s1>&#39;AE&#39;</span><span class=p>:</span> <span class=s1>&#39;军事地区&#39;</span><span class=p>,</span>
 <span class=s1>&#39;AK&#39;</span><span class=p>:</span> <span class=s1>&#39;阿拉斯加州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;AL&#39;</span><span class=p>:</span> <span class=s1>&#39;阿拉巴马州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;AP&#39;</span><span class=p>:</span> <span class=s1>&#39;太平洋军事机构&#39;</span><span class=p>,</span>
 <span class=s1>&#39;AR&#39;</span><span class=p>:</span> <span class=s1>&#39;阿肯色州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;AS&#39;</span><span class=p>:</span> <span class=s1>&#39;美属萨摩亚群岛&#39;</span><span class=p>,</span>
 <span class=s1>&#39;AZ&#39;</span><span class=p>:</span> <span class=s1>&#39;阿利桑那州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;CA&#39;</span><span class=p>:</span> <span class=s1>&#39;加利福尼亚州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;CO&#39;</span><span class=p>:</span> <span class=s1>&#39;科罗拉多州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;CT&#39;</span><span class=p>:</span> <span class=s1>&#39;康涅狄格州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;DC&#39;</span><span class=p>:</span> <span class=s1>&#39;华盛顿DC&#39;</span><span class=p>,</span>
 <span class=s1>&#39;DE&#39;</span><span class=p>:</span> <span class=s1>&#39;特拉华州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;FL&#39;</span><span class=p>:</span> <span class=s1>&#39;佛罗里达州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;FM&#39;</span><span class=p>:</span> <span class=s1>&#39;FM联邦&#39;</span><span class=p>,</span>
 <span class=s1>&#39;GA&#39;</span><span class=p>:</span> <span class=s1>&#39;乔治亚州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;GU&#39;</span><span class=p>:</span> <span class=s1>&#39;关岛&#39;</span><span class=p>,</span>
 <span class=s1>&#39;HI&#39;</span><span class=p>:</span> <span class=s1>&#39;夏威夷州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;IA&#39;</span><span class=p>:</span> <span class=s1>&#39;爱荷华州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;ID&#39;</span><span class=p>:</span> <span class=s1>&#39;爱达荷州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;IL&#39;</span><span class=p>:</span> <span class=s1>&#39;伊利诺斯州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;IN&#39;</span><span class=p>:</span> <span class=s1>&#39;印第安纳州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;KS&#39;</span><span class=p>:</span> <span class=s1>&#39;堪萨斯州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;KY&#39;</span><span class=p>:</span> <span class=s1>&#39;KY&#39;</span><span class=p>,</span>
 <span class=s1>&#39;LA&#39;</span><span class=p>:</span> <span class=s1>&#39;路易斯安那州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;MA&#39;</span><span class=p>:</span> <span class=s1>&#39;马萨诸塞州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;MD&#39;</span><span class=p>:</span> <span class=s1>&#39;马里兰州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;ME&#39;</span><span class=p>:</span> <span class=s1>&#39;缅因州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;MI&#39;</span><span class=p>:</span> <span class=s1>&#39;密歇根州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;MN&#39;</span><span class=p>:</span> <span class=s1>&#39;明尼苏达州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;MO&#39;</span><span class=p>:</span> <span class=s1>&#39;密苏里州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;MP&#39;</span><span class=p>:</span> <span class=s1>&#39;MP&#39;</span><span class=p>,</span>
 <span class=s1>&#39;MS&#39;</span><span class=p>:</span> <span class=s1>&#39;密西西比州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;MT&#39;</span><span class=p>:</span> <span class=s1>&#39;蒙大拿州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;NC&#39;</span><span class=p>:</span> <span class=s1>&#39;北卡罗来纳州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;ND&#39;</span><span class=p>:</span> <span class=s1>&#39;北达科他州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;NE&#39;</span><span class=p>:</span> <span class=s1>&#39;内布拉斯加州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;NH&#39;</span><span class=p>:</span> <span class=s1>&#39;新罕布什尔州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;NJ&#39;</span><span class=p>:</span> <span class=s1>&#39;新泽西州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;NM&#39;</span><span class=p>:</span> <span class=s1>&#39;新墨西哥州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;NOT PROVIDED&#39;</span><span class=p>:</span> <span class=s1>&#39;NOT PROVIDED&#39;</span><span class=p>,</span>
 <span class=s1>&#39;NV&#39;</span><span class=p>:</span> <span class=s1>&#39;内华达州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;NY&#39;</span><span class=p>:</span> <span class=s1>&#39;纽约州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;OH&#39;</span><span class=p>:</span> <span class=s1>&#39;俄亥俄州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;OK&#39;</span><span class=p>:</span> <span class=s1>&#39;OK&#39;</span><span class=p>,</span>
 <span class=s1>&#39;OR&#39;</span><span class=p>:</span> <span class=s1>&#39;俄勒冈州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;PA&#39;</span><span class=p>:</span> <span class=s1>&#39;宾夕法尼亚州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;PR&#39;</span><span class=p>:</span> <span class=s1>&#39;PR&#39;</span><span class=p>,</span>
 <span class=s1>&#39;PW&#39;</span><span class=p>:</span> <span class=s1>&#39;PW&#39;</span><span class=p>,</span>
 <span class=s1>&#39;RI&#39;</span><span class=p>:</span> <span class=s1>&#39;罗得岛州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;SC&#39;</span><span class=p>:</span> <span class=s1>&#39;南卡罗来纳州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;SD&#39;</span><span class=p>:</span> <span class=s1>&#39;南达科他州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;TN&#39;</span><span class=p>:</span> <span class=s1>&#39;田纳西州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;TX&#39;</span><span class=p>:</span> <span class=s1>&#39;得克萨斯州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;UT&#39;</span><span class=p>:</span> <span class=s1>&#39;犹他州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;VA&#39;</span><span class=p>:</span> <span class=s1>&#39;弗吉尼亚州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;VI&#39;</span><span class=p>:</span> <span class=s1>&#39;VI&#39;</span><span class=p>,</span>
 <span class=s1>&#39;VT&#39;</span><span class=p>:</span> <span class=s1>&#39;佛蒙特州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;WA&#39;</span><span class=p>:</span> <span class=s1>&#39;华盛顿州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;WI&#39;</span><span class=p>:</span> <span class=s1>&#39;威斯康辛州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;WV&#39;</span><span class=p>:</span> <span class=s1>&#39;西弗吉尼亚州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;WY&#39;</span><span class=p>:</span> <span class=s1>&#39;怀俄明州&#39;</span><span class=p>,</span>
 <span class=s1>&#39;ZZ&#39;</span><span class=p>:</span> <span class=s1>&#39;ZZ&#39;</span><span class=p>}</span>

</code></pre></td></tr></table>
</div>
</div><div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># 将集合加入到节点列表，nodes需要把桑基图中出现的名称全部设置进去，并且要保证links中的名称与name相同</span>
<span class=n>nodes</span> <span class=o>=</span> <span class=p>[]</span>
<span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=n>node1</span><span class=p>:</span>
    <span class=n>nodes</span><span class=o>.</span><span class=n>append</span><span class=p>({</span><span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=n>scp</span><span class=p>[</span><span class=n>n</span><span class=p>]})</span>
<span class=k>for</span> <span class=n>n</span> <span class=ow>in</span> <span class=n>node2</span><span class=p>:</span>
    <span class=n>nodes</span><span class=o>.</span><span class=n>append</span><span class=p>({</span><span class=s1>&#39;name&#39;</span><span class=p>:</span> <span class=n>n</span><span class=p>})</span>
</code></pre></td></tr></table>
</div>
</div><div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># 做分组聚合</span>
<span class=n>cgs</span> <span class=o>=</span> <span class=n>c_itcont5</span><span class=o>.</span><span class=n>groupby</span><span class=p>([</span><span class=s1>&#39;STATE&#39;</span><span class=p>,</span><span class=s1>&#39;CAND_PTY_AFFILIATION&#39;</span><span class=p>])</span><span class=o>.</span><span class=n>sum</span><span class=p>()</span>
</code></pre></td></tr></table>
</div>
</div><div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=c1># 将聚合结果加入到链接列表， links代表节点关系，source表示起点，target表示终点，需要将节点关系全部输入进去，value表示节点长度</span>
<span class=n>links</span> <span class=o>=</span> <span class=p>[]</span>
<span class=k>for</span> <span class=n>row</span> <span class=ow>in</span> <span class=n>cgs</span><span class=o>.</span><span class=n>iterrows</span><span class=p>():</span>
    <span class=n>links</span><span class=o>.</span><span class=n>append</span><span class=p>({</span><span class=s1>&#39;source&#39;</span><span class=p>:</span> <span class=n>scp</span><span class=p>[</span><span class=n>row</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>0</span><span class=p>]],</span> <span class=s1>&#39;target&#39;</span><span class=p>:</span> <span class=n>row</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=mi>1</span><span class=p>],</span> <span class=s1>&#39;value&#39;</span><span class=p>:</span> <span class=nb>int</span><span class=p>(</span><span class=n>row</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=mi>0</span><span class=p>])})</span>
</code></pre></td></tr></table>
</div>
</div><div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=kn>from</span> <span class=nn>pyecharts</span> <span class=kn>import</span> <span class=n>options</span> <span class=k>as</span> <span class=n>opts</span>
<span class=kn>from</span> <span class=nn>pyecharts.charts</span> <span class=kn>import</span> <span class=n>Page</span><span class=p>,</span> <span class=n>Sankey</span>
</code></pre></td></tr></table>
</div>
</div><div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=n>sankey</span> <span class=o>=</span> <span class=n>Sankey</span><span class=p>(</span><span class=n>init_opts</span><span class=o>=</span><span class=n>opts</span><span class=o>.</span><span class=n>InitOpts</span><span class=p>(</span><span class=n>width</span><span class=o>=</span><span class=s2>&#34;1024&#34;</span><span class=p>,</span> <span class=n>height</span><span class=o>=</span><span class=s2>&#34;768&#34;</span><span class=p>))</span>		<span class=c1>#可以设置大小和图标名称</span>
<span class=n>sankey</span><span class=o>.</span><span class=n>add</span><span class=p>(</span>
    <span class=s1>&#39;各州捐款额流向图&#39;</span><span class=p>,</span>				<span class=c1>#名称</span>
    <span class=n>nodes</span><span class=p>,</span>					<span class=c1>#输入节点，如果导入json数据，nodes=json[&#39;nodes]</span>
    <span class=n>links</span><span class=p>,</span>					<span class=c1>#输入关系,nodes=json[&#39;links&#39;]</span>
    <span class=n>linestyle_opt</span><span class=o>=</span><span class=n>opts</span><span class=o>.</span><span class=n>LineStyleOpts</span><span class=p>(</span><span class=n>opacity</span><span class=o>=</span><span class=mf>0.3</span><span class=p>,</span> <span class=n>curve</span><span class=o>=</span><span class=mf>0.5</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=s2>&#34;source&#34;</span><span class=p>,</span> <span class=n>width</span><span class=o>=</span><span class=mi>10</span><span class=p>),</span>
    <span class=n>label_opts</span><span class=o>=</span><span class=n>opts</span><span class=o>.</span><span class=n>LabelOpts</span><span class=p>(</span><span class=n>position</span><span class=o>=</span><span class=s2>&#34;right&#34;</span><span class=p>,</span> <span class=n>is_show</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>color</span><span class=o>=</span><span class=s1>&#39;red&#39;</span><span class=p>),</span>
    <span class=n>node_gap</span><span class=o>=</span><span class=mi>1</span>
<span class=p>)</span>
<span class=n>sankey</span><span class=o>.</span><span class=n>render</span><span class=p>()</span>
<span class=c1># 生成的桑基图可通过下方目录查看</span>
</code></pre></td></tr></table>
</div>
</div><p><img class=lazyload src=/svg/loading.min.svg data-src=/20210101-%E5%A4%A9%E6%B1%A0%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%AB%9E%E8%B5%9B-%E8%B6%8B%E5%8A%BF%E5%9B%BE%E4%B8%8E%E6%A1%91%E5%9F%BA%E5%9B%BE%E5%88%86%E6%9E%90%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E5%80%99%E9%80%89%E4%BA%BA%E5%96%9C%E5%A5%BD%E5%BA%A6/sankey.gif data-srcset="/20210101-%E5%A4%A9%E6%B1%A0%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%AB%9E%E8%B5%9B-%E8%B6%8B%E5%8A%BF%E5%9B%BE%E4%B8%8E%E6%A1%91%E5%9F%BA%E5%9B%BE%E5%88%86%E6%9E%90%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E5%80%99%E9%80%89%E4%BA%BA%E5%96%9C%E5%A5%BD%E5%BA%A6/sankey.gif, /20210101-%E5%A4%A9%E6%B1%A0%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%AB%9E%E8%B5%9B-%E8%B6%8B%E5%8A%BF%E5%9B%BE%E4%B8%8E%E6%A1%91%E5%9F%BA%E5%9B%BE%E5%88%86%E6%9E%90%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E5%80%99%E9%80%89%E4%BA%BA%E5%96%9C%E5%A5%BD%E5%BA%A6/sankey.gif 1.5x, /20210101-%E5%A4%A9%E6%B1%A0%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%AB%9E%E8%B5%9B-%E8%B6%8B%E5%8A%BF%E5%9B%BE%E4%B8%8E%E6%A1%91%E5%9F%BA%E5%9B%BE%E5%88%86%E6%9E%90%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E5%80%99%E9%80%89%E4%BA%BA%E5%96%9C%E5%A5%BD%E5%BA%A6/sankey.gif 2x" data-sizes=auto alt=/20210101-%E5%A4%A9%E6%B1%A0%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%AB%9E%E8%B5%9B-%E8%B6%8B%E5%8A%BF%E5%9B%BE%E4%B8%8E%E6%A1%91%E5%9F%BA%E5%9B%BE%E5%88%86%E6%9E%90%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E5%80%99%E9%80%89%E4%BA%BA%E5%96%9C%E5%A5%BD%E5%BA%A6/sankey.gif title=桑基图 width=800 height=580></p>
<pre><code>'/data/nas/workspace/jupyter/download/render.html'
</code></pre>
<h3 id=结论-1>结论</h3>
<p>由各州全款额流向图可以非常快速的得知：加利福尼亚州，纽约州，马萨诸塞州在7月22日至8月20日是对民主党贡献最多的三大州。</p>
<p>佛罗里达州和德克萨斯州对两大党的贡献几乎相同，但更倾向于共和党，也是对共和党贡献较大的两个州。</p>
<p>桑基图会包含很多数据元素，通过桑基图可以探索更多的数据，例如去除两大党的情况和仅比较两大党的情况等等。</p>
</div><div class=post-footer id=post-footer>
<div class=post-info>
<div class=post-info-line>
<div class=post-info-mod>
<span>更新于 2021-01-01</span>
</div></div>
<div class=post-info-line>
<div class=post-info-md><span>
<a class=link-to-markdown href=/20210101-%E5%A4%A9%E6%B1%A0%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%AB%9E%E8%B5%9B-%E8%B6%8B%E5%8A%BF%E5%9B%BE%E4%B8%8E%E6%A1%91%E5%9F%BA%E5%9B%BE%E5%88%86%E6%9E%90%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E5%80%99%E9%80%89%E4%BA%BA%E5%96%9C%E5%A5%BD%E5%BA%A6/index.md target=_blank>阅读原始文档</a>
</span></div>
<div class=post-info-share>
<span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://spaceack.github.io/20210101-%E5%A4%A9%E6%B1%A0%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%AB%9E%E8%B5%9B-%E8%B6%8B%E5%8A%BF%E5%9B%BE%E4%B8%8E%E6%A1%91%E5%9F%BA%E5%9B%BE%E5%88%86%E6%9E%90%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E5%80%99%E9%80%89%E4%BA%BA%E5%96%9C%E5%A5%BD%E5%BA%A6/ data-title="天池大数据竞赛 Spaceack带你利用Pandas，趋势图与桑基图分析美国选民候选人喜好度" data-hashtags=python,数据分析,pandas,桑基图><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://spaceack.github.io/20210101-%E5%A4%A9%E6%B1%A0%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%AB%9E%E8%B5%9B-%E8%B6%8B%E5%8A%BF%E5%9B%BE%E4%B8%8E%E6%A1%91%E5%9F%BA%E5%9B%BE%E5%88%86%E6%9E%90%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E5%80%99%E9%80%89%E4%BA%BA%E5%96%9C%E5%A5%BD%E5%BA%A6/ data-hashtag=python><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="分享到 Hacker News" data-sharer=hackernews data-url=https://spaceack.github.io/20210101-%E5%A4%A9%E6%B1%A0%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%AB%9E%E8%B5%9B-%E8%B6%8B%E5%8A%BF%E5%9B%BE%E4%B8%8E%E6%A1%91%E5%9F%BA%E5%9B%BE%E5%88%86%E6%9E%90%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E5%80%99%E9%80%89%E4%BA%BA%E5%96%9C%E5%A5%BD%E5%BA%A6/ data-title="天池大数据竞赛 Spaceack带你利用Pandas，趋势图与桑基图分析美国选民候选人喜好度"><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="分享到 Line" data-sharer=line data-url=https://spaceack.github.io/20210101-%E5%A4%A9%E6%B1%A0%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%AB%9E%E8%B5%9B-%E8%B6%8B%E5%8A%BF%E5%9B%BE%E4%B8%8E%E6%A1%91%E5%9F%BA%E5%9B%BE%E5%88%86%E6%9E%90%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E5%80%99%E9%80%89%E4%BA%BA%E5%96%9C%E5%A5%BD%E5%BA%A6/ data-title="天池大数据竞赛 Spaceack带你利用Pandas，趋势图与桑基图分析美国选民候选人喜好度"><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@6.20.0/icons/line.svg aria-hidden=true></i></a><a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://spaceack.github.io/20210101-%E5%A4%A9%E6%B1%A0%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%AB%9E%E8%B5%9B-%E8%B6%8B%E5%8A%BF%E5%9B%BE%E4%B8%8E%E6%A1%91%E5%9F%BA%E5%9B%BE%E5%88%86%E6%9E%90%E7%BE%8E%E5%9B%BD%E9%80%89%E6%B0%91%E5%80%99%E9%80%89%E4%BA%BA%E5%96%9C%E5%A5%BD%E5%BA%A6/ data-title="天池大数据竞赛 Spaceack带你利用Pandas，趋势图与桑基图分析美国选民候选人喜好度"><i class="fab fa-weibo fa-fw" aria-hidden=true></i></a></span>
</div>
</div>
</div>
<div class=post-info-more>
<section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/python/>python</a>,&nbsp;<a href=/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/>数据分析</a>,&nbsp;<a href=/tags/pandas/>pandas</a>,&nbsp;<a href=/tags/%E6%A1%91%E5%9F%BA%E5%9B%BE/>桑基图</a></section>
<section>
<span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span>
</section>
</div>
<div class=post-nav><a href=/20201001-python%E5%88%A9%E7%94%A8matplotlib%E4%B8%87%E8%8A%B1%E5%B0%BA%E7%94%BB%E6%9C%88%E9%A5%BC/ class=prev rel=prev title=Python利用matplotlib万花尺画月饼><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Python利用matplotlib万花尺画月饼</a>
<a href=/20210929-%E4%BD%BF%E7%94%A8mysql%E5%AE%9E%E7%8E%B0%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/ class=next rel=next title=使用Mysql实现消息队列>使用Mysql实现消息队列<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div>
</div>
</article></div>
</main><footer class=footer>
<div class=footer-container><div class=footer-line>由 <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.87.0">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a>
</div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2014 - 2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/about target=_blank>Spaceack</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div>
</div>
</footer></div>
<div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部>
<i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title=查看评论>
<i class="fas fa-comment fa-fw" aria-hidden=true></i>
</a>
</div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/algoliasearch@4.13.0/dist/algoliasearch-lite.umd.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.1/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:50},comment:{},search:{algoliaAppID:"VXI4TRVSM5",algoliaIndex:"index.zh-cn",algoliaSearchKey:"4987343c645c7f8c574d58035d43fe96",highlightTag:"em",maxResultLength:10,noResultsFound:"没有找到结果",snippetLength:50,type:"algolia"}}</script><script type=text/javascript src=/js/theme.min.js></script></body>
</html>